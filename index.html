<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ููุฒููุชู</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="icon.png">

<link rel="apple-touch-icon" href="icon.png">

<link rel="manifest" href="manifest.json">

<meta name="theme-color" content="#FF6B6B">
</head>
<body>

    <div id="screen-welcome" class="screen active">
        <h1>๐ฉโ๐ณ ููุฒููุชู</h1>
        <p>ูุฑุญุจุงู ูุง ุฃููุ ูุงุด ุฑุงูู ุญุงุจุฉ ุชูุฌุฏูุ</p>
        <div class="mode-selection">
            <button class="btn-big-icon" onclick="setMode('daily')">๐ฝ๏ธ<br>ูุฌุจุฉ ูููู ูุงุญุฏ</button>
            <button class="btn-big-icon" onclick="setMode('weekly')">๐<br>ุฌุฏูู ุฃุณุจูุน ูุงูู</button>
        </div>
        <div class="secondary-actions">
            <button class="btn-secondary" onclick="showAllRecipes()">๐ ุนุฑุถ ูู ุงูุฃููุงุช</button>
            <button class="btn-secondary" onclick="showAddRecipeScreen()">โ ุฅุถุงูุฉ ุฃููุฉ ุฌุฏูุฏุฉ</button>
            <button class="btn-secondary" onclick="showSavedMenus()">๐ ุฌุฏุงููู ุงููุญููุธุฉ</button>
        </div>
    </div>

    <div id="screen-ingredients" class="screen">
        <h2>ูุงุด ุนูุฏู ููุงุฏูุฑุ</h2>
        <div class="ingredients-grid" id="ingredientsList"></div>
        <div class="sticky-footer"><button class="btn-primary" onclick="generatePlan()">โจ ุงูุชุฑุญู ุนููุง โจ</button></div>
        <br><br><br><button class="btn-text" onclick="goBack('screen-welcome')">ุฑุฌูุน</button>
    </div>

    <div id="screen-result" class="screen">
        <h2 id="resultTitle">ุงููุชูุฌุฉ:</h2>
        <div id="resultsContainer"></div> 
        
        <div class="actions">
            <button class="btn-success" onclick="saveCurrentPlan()">๐ ุญูุธ</button>
            <button id="btn-pdf" class="btn-secondary" style="background:#3498db;" onclick="printCurrentPlan()">๐จ๏ธ PDF</button>
        </div>
        
        <button id="btn-share" class="btn-secondary" style="background:#25D366; color:white; margin-top:5px;" onclick="shareCurrentPlan()">๐ฒ ูุดุงุฑูุฉ (ูุงุชุณุงุจ)</button>
        
        <button id="btn-shopping" class="btn-secondary" style="background:#9b59b6; color:white; display:none; margin-top:5px;" onclick="generateShoppingList()">๐ ูุงุด ูุดุฑู (ูุงุฆูุฉ ุงููุถูุงู)</button>

        <button class="btn-danger" style="margin-top:10px" onclick="generatePlan()">๐ ุฎูุทุฉ ุฌุฏูุฏุฉ</button>
        <button class="btn-text" onclick="goBack('screen-ingredients')">ุชุบููุฑ ุงูููุงุฏูุฑ</button>
    </div>

    <div id="screen-catalog" class="screen">
        <h2>ูู ุงูุฃููุงุช ุงููุชููุฑุฉ</h2>
        <input type="text" id="searchBox" placeholder="ุงุจุญุซู ุนู ุฃููุฉ..." onkeyup="filterRecipes()">
        <div id="catalogContainer"></div>
        <button class="btn-text" onclick="goBack('screen-welcome')">ุฑุฌูุน ูููุงุฆูุฉ</button>
    </div>

    <div id="screen-add" class="screen">
        <h2>ุฅุถุงูุฉ ุฃููุฉ ุฌุฏูุฏุฉ</h2>
        <form onsubmit="event.preventDefault(); addNewRecipe();">
            <input type="text" id="newRecipeName" class="input-field" placeholder="ุงุณู ุงูุฃููุฉ" required>
            <label>ููุน ุงูุฃููุฉ:</label>
            <select id="newRecipeType" class="input-field">
                <option value="ูุฑูุฉ">ูุฑูุฉ</option>
                <option value="ุนุฌุงุฆู">ุนุฌุงุฆู</option>
                <option value="ุบุฑุงุชุงู">ุบุฑุงุชุงู</option>
                <option value="ุฎููู">ุฎููู/ุตููู</option>
            </select>
            <label>ุงูููุงุฏูุฑ:</label>
            <div id="newRecipeIngredients" class="ingredients-grid small-grid"></div>
            <textarea id="newRecipeInstructions" class="input-field" placeholder="ุทุฑููุฉ ุงูุชุญุถูุฑ..." rows="4"></textarea>
            <button type="submit" class="btn-primary">ุญูุธ ุงูุฃููุฉ</button>
        </form>
        <button class="btn-text" onclick="goBack('screen-welcome')">ุฅูุบุงุก</button>
    </div>

    <div id="screen-saved" class="screen">
        <h2>ุฌุฏุงููู ุงููุญููุธุฉ</h2>
        <ul id="savedList" class="saved-list"></ul>
        <button class="btn-text" onclick="goBack('screen-welcome')">ุฑุฌูุน ูููุงุฆูุฉ</button>
    </div>

    <div id="recipeModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle"></h2>
            <img id="modalImage" src="" alt="" style="width:100%; border-radius:10px;">
            <h3>ุงูููููุงุช:</h3><p id="modalIngredients"></p>
            <h3>ุทุฑููุฉ ุงูุชุญุถูุฑ:</h3><div id="modalBody"></div>
        </div>
    </div>

    <div id="shoppingModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeShoppingModal()">&times;</span>
            <h2>๐ ูุงุฆูุฉ ุงููุถูุงู ููุฐุง ุงูุฃุณุจูุน</h2>
            <ul id="shoppingListItems" style="text-align: right; padding-right: 20px;"></ul>
            <button class="btn-primary" onclick="copyShoppingList()">๐ ูุณุฎ ุงููุงุฆูุฉ</button>
        </div>
    </div>

    <div id="printableSection" class="print-only-section">
        <div class="print-header">
            <h1>ุฌุฏูู ุงูุฃูู</h1>
            <p>ูู ุฅุนุฏุงุฏ: ุชุทุจูู ููุฒููุชู ๐ฉโ๐ณ</p>
            <p id="printDate"></p>
        </div>
        
        <table class="print-table">
            <thead>
                <tr>
                    <th style="width: 20%">ุงูููู</th>
                    <th style="width: 40%">ุงูุทุจุฎ</th>
                    <th style="width: 40%">ููุงุญุธุงุช / ููุงุฏูุฑ</th>
                </tr>
            </thead>
            <tbody id="printTableBody"></tbody>
        </table>
        
        <div class="print-footer"><p>ุจุตุญุชูู ููููุง! โค๏ธ</p></div>
    </div>

    <script src="script.js"></script>
    <script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js")
    .then(() => console.log("Service Worker enregistrรฉ"))
    .catch(err => console.log("SW erreur:", err));
}
</script>

</body>

</html>
